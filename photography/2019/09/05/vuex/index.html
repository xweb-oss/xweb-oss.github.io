<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vuex详解 | 嗯哼Blog</title>
    <meta name="description" content="This is a blog example built by VuePress">
    <link rel="icon" href="../img/xxx.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.0741b0e1.css" as="style"><link rel="preload" href="/assets/js/app.005a308b.js" as="script"><link rel="preload" href="/assets/js/3.b749d468.js" as="script"><link rel="preload" href="/assets/js/5.539359e4.js" as="script"><link rel="preload" href="/assets/js/4.6f71977b.js" as="script"><link rel="prefetch" href="/assets/js/10.ad2647c4.js"><link rel="prefetch" href="/assets/js/11.9c5817a9.js"><link rel="prefetch" href="/assets/js/12.a6536986.js"><link rel="prefetch" href="/assets/js/13.f1c7fe0c.js"><link rel="prefetch" href="/assets/js/14.99ca4152.js"><link rel="prefetch" href="/assets/js/15.38522497.js"><link rel="prefetch" href="/assets/js/16.f972764c.js"><link rel="prefetch" href="/assets/js/17.6206a63e.js"><link rel="prefetch" href="/assets/js/18.b0de23fb.js"><link rel="prefetch" href="/assets/js/19.0bc589a6.js"><link rel="prefetch" href="/assets/js/20.265398d7.js"><link rel="prefetch" href="/assets/js/21.9a61ae12.js"><link rel="prefetch" href="/assets/js/22.93583b4f.js"><link rel="prefetch" href="/assets/js/6.ddc1aa39.js"><link rel="prefetch" href="/assets/js/7.ec43a439.js"><link rel="prefetch" href="/assets/js/8.599e01aa.js"><link rel="prefetch" href="/assets/js/9.2936d01f.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.a080dc06.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0741b0e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">嗯哼Blog
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/2019/09/05/posts/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/photography/" class="nav-link router-link-active">前端基础</a></li><li class="nav-item"><a href="/about/2019/09/04/about/" class="nav-link">关于</a></li><li class="nav-item"><a href="https://github.com/xweb-oss" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li><li class="nav-item"><a href="https://gitee.com/wangchengzhu/dashboard" target="_blank" rel="noopener noreferrer" class="nav-link external">Gitee</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">嗯哼Blog
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/2019/09/05/posts/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/photography/" class="nav-link router-link-active">前端基础</a></li><li class="mobile-nav-item"><a href="/about/2019/09/04/about/" class="nav-link">关于</a></li><li class="mobile-nav-item"><a href="https://github.com/xweb-oss" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li><li class="mobile-nav-item"><a href="https://gitee.com/wangchengzhu/dashboard" target="_blank" rel="noopener noreferrer" class="nav-link external">Gitee</a></li></ul></div></div></div></section> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content content__default"><h1 id="vuex详解"><a href="#vuex详解" aria-hidden="true" class="header-anchor">#</a> vuex详解</h1> <p>在SPA单页面组件的开发中 Vue的vuex和React的Redux 都统称为同一状态管理，个人的理解是全局状态管理更合适；简单的理解就是你在state中定义了一个数据之后，你可以在所在项目中的任何一个组件里进行获取、进行修改，并且你的修改可以得到全局的响应变更。下面咱们一步一步地剖析下vuex的使用:</p> <h3 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <ol><li>在 vue 2.0+ 你的vue-cli项目中安装 vuex :</li></ol> <blockquote><p>npm install vuex --save</p></blockquote> <h3 id="引入"><a href="#引入" aria-hidden="true" class="header-anchor">#</a> 引入</h3> <ol><li>在src文件目录下新建一个名为store的文件夹，为方便引入并在store文件夹里新建一个index.js,里面的内容如下:</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span> 
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>  
</code></pre></div><ol start="2"><li>在 main.js里面引入store，然后再全局注入一下，这样一来就可以在任何一个组件里面使用this.$store了：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token comment">//引入store</span>
 <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span> <span class="token comment">// 使用store</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;App/&gt;'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h3> <ol><li>在store文件的index.js中，我们先声明一个state变量，并赋值一个空对象给它，里面随便定义两个初始属性值；然后再在实例化的Vuex.Store里面传入一个空对象，并把刚声明的变量state仍里面：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>   
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>  
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token comment">//要设置的全局访问的state对象</span>
     showFooter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
     changableNum<span class="token punctuation">:</span><span class="token number">0</span>  
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  
       state  
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>实际上做完上面的四个步骤后，你已经可以用this.$store.state.showFooter或this.$store.state.changebleNum在任何一个组件里面获取showfooter和changebleNum定义的值了，但这不是理想的获取方式.</li></ol> <p><strong>vuex官方API提供了一个getters，和vue计算属性computed一样，来实时监听state值的变化(最新状态)，并把它也仍进Vuex.Store里面，具体看下面代码:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>   
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>  
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>   <span class="token comment">//要设置的全局访问的state对象</span>
    showFooter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   
    changableNum<span class="token punctuation">:</span><span class="token number">0</span>
     <span class="token comment">//要设置的初始属性值   </span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>   <span class="token comment">//实时监听state值的变化(最新状态)   </span>
    <span class="token function">isShow</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//方法名随意,主要是 来承载变化的showFooter的值</span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>showFooter   
    <span class="token punctuation">}</span><span class="token punctuation">,</span>   
    <span class="token function">getChangedNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//方法名随意,主要是用来承载变化的changableNum的值   </span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>changebleNum    
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>   
      state<span class="token punctuation">,</span> 
      getters  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>  
</code></pre></div><p><strong>光有定义的state的初始值，不改变它不是我们想要的需求，接下来要说的就是mutations了.</strong></p> <ol><li>mutattions也是一个对象，这个对象里面可以放改变state的初始值的方法，具体的用法就是给里面的方法传入参数state或额外的参数,然后利用vue的双向数据驱动进行值的改变，同样的定义好之后也把这个mutations扔进Vuex.Store里面，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>   
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>   
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>    
 <span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>   <span class="token comment">//要设置的全局访问的state对象    </span>
     showFooter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
     changableNum<span class="token punctuation">:</span><span class="token number">0</span> 
     <span class="token comment">//要设置的初始属性值  </span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>   <span class="token comment">//实时监听state值的变化(最新状态)  </span>
    <span class="token function">isShow</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//承载变化的showFooter的值</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>showFooter  
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token function">getChangedNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//承载变化的changebleNum的值  </span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>changableNum 
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>  
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//自定义改变state初始值的方法，这里面的参数除了state之外还可以再传额外的  参数(变量或对象);`  </span>
        state<span class="token punctuation">.</span>showFooter <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//同上  </span>
        state<span class="token punctuation">.</span>showFooter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">newNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//同上，这里面的参数除了state之外还传了需要增加的值sum  </span>
       state<span class="token punctuation">.</span>changableNum<span class="token operator">+=</span>sum<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
 <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  
       state<span class="token punctuation">,</span>
       getters<span class="token punctuation">,</span> 
      mutations 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>   
</code></pre></div><hr> <ol start="2"><li>这时候你完全可以用 this.$store.commit('show') 或 this.$store.commit('hide') 以及 this.$store.commit('newNum',6) 在别的组件里面进行改变showfooter和changebleNum的值了，但这不是理想的改变值的方式；因为在 Vuex 中，mutations里面的方法 都是同步事务，意思就是说：比如这里的一个this.$store.commit('newNum',sum)方法,两个组件里用执行得到的值，每次都是一样的，这样肯定不是理想的需求</li></ol> <p><strong>此时，vuex官方API提供了一个actions方法</strong>，</p> <ol><li>其最大的作用可以包含任意异步操作，actions方法是用来异步触发mutations里面的方法，里面自定义的函数接收一个context参数和要变化的形参，context与store实例具有相同的方法和属性，所以它可以执行context.commit(' '),然后也不要忘了把它也扔进Vuex.Store里面：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span> 
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>  
 <span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>   <span class="token comment">//要设置的全局访问的state对象`  </span>
     showFooter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
    changableNum<span class="token punctuation">:</span><span class="token number">0</span> 
    <span class="token comment">//要设置的初始属性值 </span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>   
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>   <span class="token comment">//实时监听state值的变化(最新状态) </span>
    <span class="token function">isShow</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//承载变化的showFooter的值  </span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>showFooter  
  <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token function">getChangedNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//承载变化的changebleNum的值  </span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>changableNum  
    <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//自定义改变state初始值的方法，这里面的参数除了state之外还可以再传额外的参数(变量或对象);  </span>
       state<span class="token punctuation">.</span>showFooter <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//同上  </span>
        state<span class="token punctuation">.</span>showFooter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token function">newNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//同上，这里面的参数除了state之外还传了需要增加的值sum  </span>
       state<span class="token punctuation">.</span>changableNum<span class="token operator">+=</span>sum<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
 <span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>  
    <span class="token function">hideFooter</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//自定义触发mutations里函数的方法，context与store 实例具有相同方法和属性 </span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'hide'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token function">showFooter</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//同上注释  </span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token function">getNewNum</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//同上注释，num为要变化的形参</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'newNum'</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span>  
     <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
       state<span class="token punctuation">,</span>  
       getters<span class="token punctuation">,</span> 
       mutations<span class="token punctuation">,</span> 
       actions`  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span> 
</code></pre></div><ol start="2"><li>如果想在外部组件里进行全局执行actions里面方法的时候，你只需要用执行<br>
this.$store.dispatch('hideFooter')</li></ol> <p>或this.$store.dispatch('showFooter')</p> <p>以及this.$store.dispatch('getNewNum'，6) //6要变化的实参</p> <p>这样就可以全局改变改变showfooter或changebleNum的值了，如下面的组件中,需求是跳转组件页面后，根据当前所在的路由页面进行隐藏或显示页面底部的tabs选项卡</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FooterBar</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> FooterBar <span class="token keyword">from</span> <span class="token string">'@/components/common/FooterBar'</span>
<span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'./config/index'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span><span class="token punctuation">{</span>
    FooterBar<span class="token punctuation">:</span>FooterBar
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
     <span class="token function">isShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>isShow<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">$route</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//跳转组件页面后，监听路由参数中对应的当前页面以及上一个页面</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name<span class="token operator">==</span><span class="token string">'book'</span><span class="token operator">||</span>to<span class="token punctuation">.</span>name<span class="token operator">==</span><span class="token string">'my'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// to.name来获取当前所显示的页面，从而控制该显示或隐藏footerBar组件</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'showFooter'</span><span class="token punctuation">)</span> <span class="token comment">// 利用派发全局state.showFooter的值来控制        }else{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'hideFooter'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'hideFooter'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>最后就可以做到一呼百应的全局响应状态改变了！</strong></p> <h3 id="vuex四个辅助函数"><a href="#vuex四个辅助函数" aria-hidden="true" class="header-anchor">#</a> vuex四个辅助函数</h3> <hr> <p>#. modules 模块化 以及 组件中引入 mapGetters、mapActions 和 mapStates的使用</p> <ol><li><p>因为在大多数的项目中，我们对于全局状态的管理并不仅仅一种情况的需求，有时有多方面的需求，比如写一个商城项目，你所用到的全局state可能是关于购物车这一块儿的也有可能是关于商品价格这一块儿的；像这样的情况我们就要考虑使用vuex中的 modules 模块化了，具体怎么使用modules呢？咱们继续一步一步的走：</p></li> <li><p>首先，在store文件夹下面新建一个modules文件夹，然后在modules文件里面建立需要管理状态的js文件，既然要把不同部分的状态分开管理，那就要把它们给分成独立的状态文件了，如下图：
图片描述</p></li></ol> <p>而对应的store文件夹下面的index.js 里面的内容就直接改写成：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> footerStatus <span class="token keyword">from</span> <span class="token string">'./modules/footerStatus'</span>
<span class="token keyword">import</span> collection <span class="token keyword">from</span> <span class="token string">'./modules/collection'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    modules<span class="token punctuation">:</span><span class="token punctuation">{</span>
         footerStatus<span class="token punctuation">,</span>
         collection
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>相应的js，其中的 namespaced:true 表示当你需要在别的文件里面使用( mapGetters、mapActions 接下来会说 )时，里面的方法需要注明来自哪一个模块的方法:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//collection.js</span>

<span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>
    collects<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">//初始化一个colects数组</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getters<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token function">renderCollects</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//承载变化的collects</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span>collects<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mutations<span class="token operator">=</span><span class="token punctuation">{</span>
     <span class="token function">pushCollects</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>items</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//如何变化collects,插入items</span>
        state<span class="token punctuation">.</span>collects<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> actions<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token function">invokePushItems</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>item</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//触发mutations里面的pushCollects ,传入数据形参item 对应到items</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'pushCollects'</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
     namespaced<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//用于在全局引用此文件里的方法时标识这一个的文件名</span>
     state<span class="token punctuation">,</span>
     getters<span class="token punctuation">,</span>
     mutations<span class="token punctuation">,</span>
     actions
<span class="token punctuation">}</span>
 
<span class="token comment">//footerStatus.js</span>
 
<span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>   <span class="token comment">//要设置的全局访问的state对象</span>
     showFooter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     changableNum<span class="token punctuation">:</span><span class="token number">0</span>
     <span class="token comment">//要设置的初始属性值</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>   <span class="token comment">//实时监听state值的变化(最新状态)</span>
    <span class="token function">isShow</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//承载变化的showFooter的值</span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>showFooter
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getChangedNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//承载变化的changebleNum的值</span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>changableNum
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//自定义改变state初始值的方法，这里面的参数除了state之外还可以再传额外的参数(变量或对象);</span>
        state<span class="token punctuation">.</span>showFooter <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//同上</span>
        state<span class="token punctuation">.</span>showFooter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">newNum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//同上，这里面的参数除了state之外还传了需要增加的值sum</span>
       state<span class="token punctuation">.</span>changableNum<span class="token operator">+=</span>sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">hideFooter</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//自定义触发mutations里函数的方法，context与store 实例具有相同方法和属性</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'hide'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">showFooter</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//同上注释</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getNewNum</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//同上注释，num为要变化的形参</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'newNum'</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    namespaced<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//用于在全局引用此文里的方法时标识这一个的文件名</span>
    state<span class="token punctuation">,</span>
    getters<span class="token punctuation">,</span>
    mutations<span class="token punctuation">,</span>
    actions
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>这样一改就有了关于两个模块的state管理文件了 footerStatus.js和collection.js，现在你要运行当前的代码话，项目会报错！因为我们把上面的代码模块化分开了，引用的地方还没有改。接下来咱们一起来看看 mapState,mapGetters,mapActions的使用，首先 在需要用的 组件里面先导入 import {mapState,mapGetters,mapActions} from 'vuex';咱们先修正一下隐藏或显示页面底部的tabs选项卡（就是上面举的临时例子）的组件代码</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FooterBar</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">,</span>mapGetters<span class="token punctuation">,</span>mapActions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span> <span class="token comment">//先要引入</span>
<span class="token keyword">import</span> FooterBar <span class="token keyword">from</span> <span class="token string">'@/components/common/FooterBar'</span>
<span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'./config/index'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 name<span class="token punctuation">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
 components<span class="token punctuation">:</span><span class="token punctuation">{</span>
   FooterBar<span class="token punctuation">:</span>FooterBar
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
   <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment">//这里的...是超引用，ES6的语法，意思是state里有多少属性值我可以在这里放多少属性值</span>
        <span class="token function-variable function">isShow</span><span class="token punctuation">:</span><span class="token parameter">state</span><span class="token operator">=&gt;</span>state<span class="token punctuation">.</span>footerStatus<span class="token punctuation">.</span>showFooter <span class="token comment">//注意这些与上面的区别就是state.footerStatus,</span>
                                                     <span class="token comment">//里面定义的showFooter是指footerStatus.js里state的showFooter</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">//你也可以用下面的mapGetters来获取isShow的值，貌似下面的更简洁</span>
   <span class="token comment">/*...mapGetters('footerStatus',{ //footerStatus指的是modules文件夹下的footerStatus.js模块
        isShow:'isShow' //第一个isShow是我自定义的只要对应template里v-if=&quot;isShow&quot;就行，
                        //第二个isShow是对应的footerStatus.js里的getters里的isShow
     })*/</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 watch<span class="token punctuation">:</span><span class="token punctuation">{</span>
     <span class="token function">$route</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name<span class="token operator">==</span><span class="token string">'book'</span><span class="token operator">||</span>to<span class="token punctuation">.</span>name<span class="token operator">==</span><span class="token string">'my'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'footerStatus/showFooter'</span><span class="token punctuation">)</span> <span class="token comment">//这里改为'footerStatus/showFooter',</span>
                                                          <span class="token comment">//意思是指footerStatus.js里actions里的showFooter方法</span>
       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'footerStatus/hideFooter'</span><span class="token punctuation">)</span> <span class="token comment">//同上注释</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="5"><li>现在项目代码应该就不会报错了，好,最后咱们再来看一下mapActions的用法，实际上上面的this.$store.dispatch('footerStatus/showFooter')已经算是一种执行相应模块的action里的方法了，但有时会牵扯的事件的触发及传值，那就会有下面的mapActions用法了,还记得上面的另一个模块collection.js吗？来看一下里面的actions中的方法结构：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>
    collects<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">//初始化一个colects数组</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getters<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token function">renderCollects</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//承载变化的collects</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span>collects<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mutations<span class="token operator">=</span><span class="token punctuation">{</span>
     <span class="token function">pushCollects</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>items</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//如何变化collects,插入items</span>
        state<span class="token punctuation">.</span>collects<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> actions<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token function">invokePushItems</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>item</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//触发mutations里面的pushCollects ,传入数据形参item 对应到items</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'pushCollects'</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>需要传值来实时变动state.collects里的数据，那肯定要在执行它的地方进行传值了，所以下面用到它的地方我们用了个@click来执行这个invokePushItems方法了，并且传入相应的对象数据item,如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>joinState<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>joinStateHead<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>h3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>全国改性料通讯录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>joinStatus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>invokePushItems(item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加入收藏列<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span><span class="token punctuation">{</span>
     conditionFilter
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'bookDetail'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      item<span class="token punctuation">:</span><span class="token punctuation">{</span>
         id<span class="token punctuation">:</span><span class="token string">'01'</span><span class="token punctuation">,</span>
         productName<span class="token punctuation">:</span> <span class="token string">'苹果'</span><span class="token punctuation">,</span>
         price<span class="token punctuation">:</span><span class="token string">'1.6元/斤'</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'footerStatus/hideFooter'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'collection'</span><span class="token punctuation">,</span><span class="token punctuation">[</span> <span class="token comment">//collection是指modules文件夹下的collection.js</span>
          <span class="token string">'invokePushItems'</span>  <span class="token comment">//collection.js文件中的actions里的方法，在上面的@click中执行并传入实参</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="6"><li>这样一来，在这个组件里面操作的 collecttion.js 中的state的数据，在其他的任何的一个组件里面都会得到相应的更新变化了，获取状态的页面代码如下：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(val,index) in arrList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">&gt;</span></span>{{val.productName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{val.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">,</span>mapGetters<span class="token punctuation">,</span>mapActions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'book'</span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token comment">// ...mapState({  //用mapState来获取collection.js里面的state的属性值</span>
        <span class="token comment">//    arrList:state=&gt;state.collection.collects</span>
        <span class="token comment">// }),</span>
        <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">'collection'</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token comment">//用mapGetters来获取collection.js里面的getters</span>
            arrList<span class="token punctuation">:</span><span class="token string">'renderCollects'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="图解vuex"><a href="#图解vuex" aria-hidden="true" class="header-anchor">#</a> 图解vuex</h3> <p><strong>为了更清晰附上图解-----------vuex</strong></p> <h6 id="vue-cli3-0详解-vuex点击跳转链接"><a href="#vue-cli3-0详解-vuex点击跳转链接" aria-hidden="true" class="header-anchor">#</a> vue-cli3.0详解  vuex<a href="https://blog.csdn.net/asdf8968/article/details/82703447" target="_blank" rel="noopener noreferrer">点击跳转链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h6> <p>#1. State</p> <blockquote><p>vuex中的数据源，我们需要保存的数据就保存在这里，可以在页面通过this.$store.state来获取我们定义的数据;</p></blockquote> <p><img src="/assets/img/state.dd983ed7.png" alt="state"><br>
在home.vue组件中通过this.$store.state.xxx获取</p> <p><img src="/assets/img/state2.2254c342.png" alt="state"></p> <p>#2. getter</p> <blockquote><ul><li>Getter相当于vue中的computed计算属性，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算</li> <li>通过属性访问Getter 会暴露为 store.getters 对象，你可以以属性的形式访问这些值：
<code>this.$store.getters.xxx</code></li> <li>Getters 可以用于监听、state中的值的变化，返回计算后的结果，这里我们修改store.js和home.vue文件如下</li></ul></blockquote> <p><img src="/assets/img/getter.8a1f4dcf.png" alt="state"></p> <hr> <p><img src="/assets/img/getter2.6f305793.png" alt="state"></p> <hr> <p><img src="/assets/img/getter3.212246ed.png" alt="state"></p> <p>#3. mutations<br> <strong>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation，并且Mutation 必须是同步函数</strong></p> <ul><li>现在我们已经使用了vuex中的state，接下来我们如何操作这个值呢？ 没错！用mutations和actions，我们继续操作store.js文件</li> <li>我们在sotre.js中定义mutations对象，该对象中有两个方法，mutations里面的参数，第一个默认为state，接下来的为自定义参数。</li></ul> <p><img src="/assets/img/mutations.70e8a985.png" alt="state"></p> <ul><li><p>其中第二个参数obj在官方文档就是载荷（payload），可以传入参数及对象。</p></li> <li><p>在大多数情况下，载荷应该是一个对象，这样可以包含多个字段并且记录的 mutation 会更易读</p></li> <li><p>接下来在home.vue中进行提交mutation，这里的num 就可以看做之前的obj载荷的值。</p></li> <li><p>注：关于对象风格的提交方式，请查看<a href="https://vuex.vuejs.org/zh/guide/mutations.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <p><img src="/assets/img/mutations2.a4023770.png" alt="state"><br> <img src="/assets/img/mutations3.9953cb38.png" alt="state"><br> <img src="/assets/img/mutations4.e0fa4a3f.png" alt="state"><br> <img src="/assets/img/mutations5.74ce9c45.png" alt="state"></p> <p>#4 actios</p> <p>上面我们看到啦，通过提交mutation可以同步的更改 Vuex store 中的状态，但是在 mutation 中混合异步调用会导致你的程序很难调试，所以为了处理异步操作，我们继续看Action：</p> <ul><li>Action 提交的是 mutation，而不是直接变更状态。</li> <li>Action 可以包含任意异步操作。</li></ul> <p>Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用 context.commit 提交一个 mutation，或者通过 context.state 和 context.getters 来获取 state 和 getters。</p> <p>接下来我们先在store.js中定义action来异步提交mutation</p> <p>这里可以通过ES2015 的 参数解构 来简化代码,具体查看<a href="https://vuex.vuejs.org/zh/guide/actions.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，特别简单，可以让我们少敲几行代码。</p> <p><img src="/assets/img/actions.f7a75d10.png" alt="state"></p> <p>然后我们在home.vue中分发Action：</p> <p><img src="/assets/img/actions2.d1207434.png" alt="state"></p> <p><img src="/assets/img/actions3.56ea037b.png" alt="state"><br>
这里看起来好像比直接提交mutation麻烦，但是它却解决了异步的操作问题，而且熟练啦，其实也很简单</p> <p><img src="/assets/img/actions4.edd021da.png" alt="state"></p> <h6 id="vue-cli3-0的vux到导入方式-如下图"><a href="#vue-cli3-0的vux到导入方式-如下图" aria-hidden="true" class="header-anchor">#</a> vue-cli3.0的vux到导入方式 如下图:</h6> <p><img src="/assets/img/daima.9fb5af20.jpg" alt="state"></p> <p>图一:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> cptwebsite <span class="token keyword">from</span> <span class="token string">'./modules/cpt-website'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    cptwebsite        <span class="token comment">// 命名空间名</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>图二</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 其中第一个参数表示相对的文件目录---  './modules' ，第二个参数表示是否包括子目录中的文件    'false代表不包含'，第三个参数表示引入的文件匹配的正则表达式</span>

<span class="token keyword">const</span> files <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./modules'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

files<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  modules<span class="token punctuation">[</span>key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\.\/|\.js)/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">files</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span>default
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  namespaced<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">// 开启命名空间</span>
  modules 
<span class="token punctuation">}</span>
</code></pre></div><p>使用
'...mapGetters('cptwebsite/account', ['hasTheme']),'</p> <h3 id="其中涉及到命名空间"><a href="#其中涉及到命名空间" aria-hidden="true" class="header-anchor">#</a> 其中涉及到命名空间</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * account.js
*****************************************************************************************
*/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    bettingPos<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hasTheme</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MENUS</span><span class="token punctuation">.</span>theme
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

 actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dispatch <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> phone <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> password <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> loginType <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> loginIp <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">AccountLogin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          phone<span class="token punctuation">,</span>
          password<span class="token punctuation">,</span>
          loginType<span class="token punctuation">,</span>
          loginIp
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> err<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              util<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;uuid&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
              util<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;cptwebsite/user/set&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span> root<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeInfo</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">.</span>info<span class="token punctuation">,</span>
        <span class="token operator">...</span>payload
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>组件中使用：
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions<span class="token punctuation">,</span> mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">'cptwebsite/account'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'hasTheme'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
methods：<span class="token punctuation">{</span>
 <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'cptwebsite/account'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#安装" title="安装">安装</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#引入" title="引入">引入</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#使用" title="使用">使用</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#vuex四个辅助函数" title="vuex四个辅助函数">vuex四个辅助函数</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#图解vuex" title="图解vuex">图解vuex</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#其中涉及到命名空间" title="其中涉及到命名空间">其中涉及到命名空间</a></div></div></div></div> <footer class="footer" data-v-0d113134><div class="footer-left-wrap" data-v-0d113134><ul class="contact" data-v-0d113134><li class="contact-item" data-v-0d113134><a href="https://github.com/xweb-oss" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-0d113134><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-0d113134></path></svg>
          
        </a></li><li class="contact-item" data-v-0d113134><a href="https://twitter.com/_ulivz" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-0d113134><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-0d113134></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-0d113134><ul class="copyright" data-v-0d113134><li class="copyright-item" data-v-0d113134><a href="/photography/2019/09/05/vuex/.html" class="nav-link" data-v-0d113134>生命不息 , 马杀鸡不停</a></li><li class="copyright-item" data-v-0d113134><a href="/photography/2019/09/05/vuex/.html" class="nav-link" data-v-0d113134>人不狠,成不了大事</a></li></ul></div></footer></div><div class="global-ui"><!----><div class="reading-progress top" data-v-7681808f><div class="progress" data-v-7681808f></div></div></div></div>
    <script src="/assets/js/app.005a308b.js" defer></script><script src="/assets/js/3.b749d468.js" defer></script><script src="/assets/js/5.539359e4.js" defer></script><script src="/assets/js/4.6f71977b.js" defer></script>
  </body>
</html>
